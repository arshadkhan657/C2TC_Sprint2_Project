<div class="container mt-5 d-flex justify-content-center">
  <!-- Register Form Card -->
  <div class="card p-4 shadow-sm" style="width: 450px;">
    <h2 class="card-title text-center mb-4">Customer Service</h2>

    <form #registerForm="ngForm" (ngSubmit)="register(registerForm)">
      <div class="mb-4">
        <label for="c_name" class="form-label fw-bold fs-6">Name</label>
        <input
          type="text"
          id="c_name"
          class="form-control form-control-lg"
          required
          name="c_name"
          [(ngModel)]="customerToUpdate.c_name"
          #c_nameModel="ngModel"
        />
        <div class="text-danger mt-1" *ngIf="c_nameModel.invalid && c_nameModel.touched">
          Name is required
        </div>
      </div>

      <div class="mb-4">
        <label for="address" class="form-label fw-bold fs-6">Address</label>
        <input
          type="text"
          id="address"
          class="form-control form-control-lg"
          required
          name="address"
          [(ngModel)]="customerToUpdate.address"
          #addressModel="ngModel"
        />
        <div class="text-danger mt-1" *ngIf="addressModel.invalid && addressModel.touched">
          Address is required
        </div>
      </div>

      <div class="text-center">
        <button type="submit" class="btn btn-primary btn-lg w-100" [disabled]="registerForm.invalid">
          Register
        </button>
      </div>
    </form>
  </div>
</div>

<hr class="my-5" />

<!-- Customer List Table -->
<div class="table-responsive mt-4">
  <table class="table table-striped align-middle text-center">
    <thead class="table-light">
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Address</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let customer of customerDetails">
        <td>{{ customer.c_id }}</td>
        <td>{{ customer.c_name }}</td>
        <td>{{ customer.address }}</td>
        <td>
          <button class="btn btn-warning btn-sm me-2" (click)="edit(customer)">Edit</button>
          <button class="btn btn-danger btn-sm" (click)="deleteCustomer(customer)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Update Customer Form as Modal Overlay -->
<div *ngIf="customerToUpdate.c_id" class="update-overlay">
  <div class="update-card p-4 border border-light rounded shadow-sm">
    <h2 class="mb-4 text-center">Update Customer</h2>

    <form #updateForm="ngForm" (ngSubmit)="updateCustomer()">
      <!-- Name Field -->
      <div class="mb-3">
        <label for="editName" class="form-label">Name</label>
        <input
          type="text"
          id="editName"
          class="form-control"
          required
          [(ngModel)]="customerToUpdate.c_name"
          name="c_name"
        />
      </div>

      <!-- Address Field -->
      <div class="mb-3">
        <label for="editAddress" class="form-label">Address</label>
        <input
          type="text"
          id="editAddress"
          class="form-control"
          required
          [(ngModel)]="customerToUpdate.address"
          name="address"
        />
      </div>

      <!-- Buttons Centered -->
      <div class="d-flex justify-content-center gap-2 mt-3">
        <button type="submit" class="btn btn-success btn-sm w-25">Update</button>
        <button type="button" class="btn btn-secondary btn-sm w-25"
          (click)="customerToUpdate = { c_id: null, c_name: '', address: '' }">
          Cancel
        </button>
      </div>
    </form>
  </div>
</div>

